<!doctype html>

<html>
	<head>
		<title>Buddy List</title>	
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="/css/bootstrap.min.css" rel="stylesheet">
		<link href="/css/bootstrap-theme.min.css" rel="stylesheet">
		<link href="/css/bootstrap-switch.min.css" rel="stylesheet">
		<link href="css/bootstrap-timepicker.min.css" rel="stylesheet">
		<link href="http://fonts.googleapis.com/css?family=Arvo" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">
		<link href="/css/gitfit.css" rel="stylesheet">

	</head>

	<body>

		{{> _navbar}}

		<div class="container">
			{{#if friends}}
			{{#each friends}}	
			<div id="friends-div">
				<div class="col-xs-4">
					<a href="profile/{{username}}" class="thumbnail"><img src="{{imageURL}}" id="image_url"></img></a>
				</div>
				<div class="col-xs-8">
					<a href="profile/{{username}}"><h5 id="name">{{name.first}} {{name.last}}</h5></a> 
					<button type="button" class="btn btn-custom btn-sm" data-toggle="modal" data-target="#messageBuddyModal{{username}}">Message</button>
					<a href="/buddylist/remove/{{username}}" type="button" class="unfriendBtn btn btn-warning btn-sm" data-toggle="modal" data-target="#successfulUnfriend"><span class="glyphicon glyphicon-minus"></span>Unfriend</a>
				</div>
				<hr width="100%">

				<!-- Message User Model -->
				<div class="modal fade" id="messageBuddyModal{{username}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								<h4 class="modal-title" id="myModalLabel">Message Buddy</h4>
							</div>
							<div class="modal-body">
								<div class="new-message-form">
									<form id="new-message-formid-{{username}}" role="form">
										<div class="form-group">
											<label for="to">To:</label>
											<input type="text" class="form-control" id="to" value="{{username}}" disabled>
										</div>
										<div class="form-group">
											<label for="messageSubject">Subject:</label>
											<input type="text" class="form-control" id="messageSubject">
											<label for="messageContent">Message:</label>
											<textarea type="text" class="form-control" rows="3" id="messageContent"></textarea>
										</div>
									</form>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-custom newMessageSubmitBtn" id="{{username}}" data-dismiss="modal" data-toggle="modal" data-target="#successfulMessageSent">Send</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			{{/each}}


			<!-- Message Sent Modal -->
			<div class="modal fade" id="successfulMessageSent" tabindex="-1"  role="dialog" aria-labelledby="myModalLabel" aria-        hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">Message Sent</h4>
						</div>
						<div class="modal-body">
							<center><a type="button" class="btn btn-success btn-sm" data-dismiss="modal">Close</a></center>
						</div>
					</div>
				</div>
			</div>

			<!-- Successful Unfriend Modal -->
			<div class="modal fade" id="successfulUnfriend" tabindex="-1"  role="dialog" aria-labelledby="myModalLabel" aria-        hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">Successful Unfriend!</h4>
						</div>
						<div class="modal-body">
							<center><a type="button" class="buddylistUnfriendBtn btn btn-success btn-sm" data-dismiss="modal">Close</a></center>
						</div>
					</div>
				</div>
			</div>

			{{else}}
			<div>
				<p>You don't have any buddies yet!</p>
				<a href="/findbuddy" type="button" class="btn btn-custom">Find a Buddy</a>
			</div>
			{{/if}}

		</div>

		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="/js/bootstrap.min.js"></script>
		<script src="/js/bootstrap-switch.min.js"></script>
		<script src="/js/bootstrap-timepicker.min.js"></script>
		<script src="/js/gitfit.js"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-48615248-1', 'git-fit.herokuapp.com');
			ga('send', 'pageview');
		</script>
	</body>
</html>
