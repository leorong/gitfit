<!doctype html>

<html>
<head>
	<title>Messages</title>	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Arvo" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">
	<link href="/css/gitfit.css" rel="stylesheet">
     
</head>

<body>

	{{> _navbar}}

	<div class="container">
        <h2>Messages</h2>

        <div class="message_navbar">
            <ul class="nav nav-tabs nav-justified">
                    <li class="active"><a type="btn btn-custom" href="#">All Messages</a></li>
                    <li><a href="#" id="composeBtn" type="btn btn-custom">Compose</a></li>
            </ul>
        </div>    

        <div class="messages">
            {{#each messages}}
            <div class="panel panel-default">
                <div class="panel-heading">
					<b>{{message.subject}}</b>
                </div>
                <div class="panel-body">
                    <p>Date: {{message.date}}</p>
                    <p>From: {{message.from}} </p>
                    <p>To: {{message.to}} </p>
                    <p>{{message.message}} </p>
                    {{#if reply}}
						<button type="button" class="btn btn-custom" data-toggle="modal" data-target="#messageBuddyModal{{message.from}}">Reply</button>
					{{/if}}
					<a type="button" class="btn btn-warning" href="/message/delete/{{message._id}}">Delete</a>
				</div>
			</div>

			<!-- Message User Model -->
			<div class="modal fade" id="messageBuddyModal{{message.from}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">Message Buddy</h4>
						</div>
						<div class="modal-body">
							<div class="new-message-form">
								<form id="new-message-formid-{{message.from}}" role="form">
									<div class="form-group">
										<label for="to">To:</label>
										<input type="text" class="form-control" id="to" value="{{message.from}}" disabled>
									</div>
									<div class="form-group">
										<label for="messageSubject">Subject:</label>
										<input type="text" class="form-control" id="messageSubject">
										<label for="messageContent">Message:</label>
										<textarea type="text" class="form-control" rows="3" id="messageContent"></textarea>
									</div>
								</form>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-custom newMessageSubmitBtn" id="{{message.from}}">Send</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						</div>
					</div>
				</div>
			</div>
            {{/each}}
        </div>
	</div>

	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
    <script src="/js/gitfit.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-48615248-1', 'git-fit.herokuapp.com');
      ga('send', 'pageview');
    </script>
</body>
</html>
